ockit5;

public class Calculator
{
	public double add(double number1, double number2)
	{
		return realAdd(number1, number2);
	}

	public double substract(double number1, double number2)
	{
		return realSubstract(number1, number2);
	}

	private double realAdd(double number1, double number2)
	{
		return number1 + number2;
	}

	private double realSubstract(double number1, double number2)
	{
		return number1 - number2;
	}
}
```

```
package jmockit5;

import org.junit.Test;

import mockit.Deencapsulation;
import mockit.Expectations;

import static org.junit.Assert.*;

public class TestCalculator
{

	@Test
	public void test1()
	{
		final Calculator calculator = new Calculator();
		new Expectations(calculator)
		{
			{
				Deencapsulation.invoke(calculator, "realAdd", anyDouble, anyDouble);
				// 在这里编写其他代码
				result = 6;
			}
		};

		// 插桩的私有方法执行成功
		assertEquals(6, calculator.add(1, 2), 0);
		// 未插桩的私有方法不受影响
		assertEquals(-1, calculator.substract(1, 2), 0);
	}

	@Test
	public void test2()
	{
		final Calculator calculator = new Calculator();
		new Expectations(calculator)
		{
			{
				Deencapsulation.invoke(calculator, "realAdd", anyDouble, anyDouble);
				// 在这里编写其他代码
				result = 6;
			}
			{
				Deencapsulation.invoke(calculator, "realSubstract", anyDouble, anyDouble);
				// 在这里编写其他代码
				result = 6;
			}
		};

		// 插桩的方法执行成功
		assertEquals(6, calculator.add(1, 2), 0);
		assertEquals(6, calculator.substract(1, 2), 0);
	}

	@Test
	public void test3()
	{
		final Calculator calculator = new Calculator();
		new Expectations(calculator)
		{
			{
				Deencapsulation.invoke(calculator, "realAdd", anyDouble, anyDouble);
				// 在这里编写其他代码
				result = 6;
			}
		};

		// 插桩的是calculator对象,对Calculator类的新实例无影响
		Calculator calculator2 = new Calculator();
		assertEquals(6, calculator2.add(1, 2), 0);
	}

}

```

Mock私有非静态成员变量
-------------

```
package jmockit6;

public class Calculator
{
	private double num = 0;

	public double add(double number1)
	{
		return num + number1;
	}

}
```

```
package jmockit6;

import org.junit.Test;

import mockit.Deencapsulation;
import mockit.Expectations;

import static org.junit.Assert.*;

public class TestCalculator
{

	@Test
	public void test1()
	{
		final Calculator calculator = new Calculator();
		new Expectations(calculator)
		{
			{
				Deencapsulation.setField(calculator, "num", 3);
			}
		};

		// 插桩的私有成员变量执行成功
		assertEquals(6, calculator.add(3), 0);
	}

}

```

Mock私有静态成员变量
------------

```
package jmockit7;

public class Calculator
{
	private static double num = 0;

	public static double add(double number1)
	{
		return num + number1;
	}

}
```

```
package jmockit7;

import org.junit.Test;

import mockit.Deencapsulation;
import mockit.Expectations;

import static org.junit.Assert.*;

public class TestCalculator
{

	@Test
	public void test1()
	{
		new Expectations(Calculator.class)
		{
			{
				Deencapsulation.setField(Calculator.class, "num", 3);
			}
		};

		// 插桩的私有成员变量执行成功
		assertEquals(6, Calculator.add(3), 0);
	}

}
```

Mock非静态成员变量
-----------

```
package jmockit8;

public class Calculator
{
	public double num = 0;

	public double add(double number1)
	{
		return number1 + num;
	}
}
```

```
package jmockit8;

import org.junit.Test;

import mockit.Deencapsulation;
import mockit.Expectations;

import static org.junit.Assert.*;

public class TestCalculator
{
	@Test
	public void test1()
	{
		final Calculator calculator = new Calculator();
		new Expectations(calculator)
		{
			{
				Deencapsulation.setField(calculator, "num", 3);
			}
		};

		// 插桩的私有成员变量执行成功
		assertEquals(6, calculator.add(3), 0);
	}
}
```

Mock接口
------

```
package jmockit9;

public interface ICalculator
{
	public double add(double number1, double number2);

	public double substract(double number1, double number2);
}
```

```
package jmockit9;

import org.junit.Test;

import mockit.Mock;
import mockit.MockUp;

import static org.junit.Assert.*;

public class TestCalculator
{
	@Test
	public void test1()
	{
		MockUp<ICalculator> mockProxy = new MockUp<ICalculator>()
		{
			@Mock
			public double add(double number1, double number2)
			{
				return 6;
			}
		};

		ICalculator calculator = mockProxy.getMockInstance();
		// 插桩的方法执行成功
		assertEquals(6, calculator.add(1, 2), 0);
	}

	@Test
	public void test2()
	{
		MockUp<ICalculator> mockProxy = new MockUp<ICalculator>()
		{
			@Mock
			public double add(double number1, double number2)
			{
				return 6;
			}
		};

		ICalculator calculator = mockProxy.getMockInstance();
		// 未插桩的方法执行失败,基本类型返回默认值,对象返回null
		assertEquals(6, calculator.substract(1, 2), 0);
	}

}
```

参考文献
====

[http://jmockit.org/](http://jmockit.org/)
[http://www.cnblogs.com/simplestupid/p/5170220.html](http://www.cnblogs.com/simplestupid/p/5170220.html)
[http://blog.csdn.net/chjttony/article/details/14522771](http://blog.csdn.net/chjttony/article/details/14522771)
[http://blog.csdn.net/chjttony/article/details/17838693](http://blog.csdn.net/chjttony/article/details/17838693)
[https://my.oschina.net/dexterman/blog/307039](https://my.oschina.net/dexterman/blog/307039)
[https://www.ibm.com/developerworks/cn/opensource/os-cn-easymock/](https://www.ibm.com/developerworks/cn/opensource/os-cn-easymock/)
[http://blog.csdn.net/aitangyong/article/details/20065547](http://blog.csdn.net/aitangyong/article/details/20065547)

















